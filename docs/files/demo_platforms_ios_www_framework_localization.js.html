<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>demo/platforms/ios/www/framework/localization.js - YASMF</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="YASMF"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.3.100</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/PKObject.html">PKObject</a></li>
            
                <li><a href="../classes/UI.html">UI</a></li>
            
                <li><a href="../classes/UI.COLOR.html">UI.COLOR</a></li>
            
                <li><a href="../classes/UI.FONT.html">UI.FONT</a></li>
            
                <li><a href="../classes/UI.Label.html">UI.Label</a></li>
            
                <li><a href="../classes/UI.SHADOW.html">UI.SHADOW</a></li>
            
                <li><a href="../classes/UI.View.html">UI.View</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/PKObject.html">PKObject</a></li>
            
                <li><a href="../modules/UI.html">UI</a></li>
            
                <li><a href="../modules/UI.Label.html">UI.Label</a></li>
            
                <li><a href="../modules/UI.View.html">UI.View</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: demo/platforms/ios/www/framework/localization.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">

/******************************************************************************
 *
 * localization.js
 * Author: Kerri Shotts
 *
 * Provides simple localization, as described in Chapter 1 of PhoneGap HotShot.
 *
 * Relies on JQuery/Globalize.js, as found at https://github.com/jquery/globalize
 *
 ******************************************************************************/

/*jshint
         asi:true,
         bitwise:true,
         browser:true,
         camelcase:true,
         curly:true,
         eqeqeq:false,
         forin:true,
         noarg:true,
         noempty:true,
         plusplus:false,
         smarttabs:true,
         sub:true,
         trailing:false,
         undef:true,
         white:false,
         onevar:false 
 */
/*global PKUTIL, Globalize, device */
PKUTIL.require ( &quot;PKUTIL&quot;, function () 
{ 
    PKUTIL.export ( &quot;PKLOC&quot; );
});

var PKLOC = PKLOC ||
{
};
PKLOC.version = { major: 0, minor: 3, rev: 100 };

// define our current user locale so that we don&#x27;t have to calculate it
// each time we want it
PKLOC.currentUserLocale = &quot;&quot;;
PKLOC.localizedText =
{
};

/**
 *
 * Loads the JQuery Globalize script from the framework directory
 * as well as the underlying cultures definitions.
 *
 */
PKLOC.initializeGlobalization = function(completion)
{
  PKUTIL.include([&quot;./framework/globalize.js&quot;], completion);
}
/**
 *
 * Loads the appropriate locale from the JQuery Globalize script.
 *
 */
PKLOC.loadLocales = function(theLocales, completion)
{
  for (var i = 0; i &lt; theLocales.length; i++)
  {
    theLocales[i] = &quot;./framework/cultures/globalize.culture.&quot; + theLocales[i] + &quot;.js&quot;;
  }
  PKUTIL.include(theLocales, completion);
}
/**
 *
 * Sets the current locale for the JQuery Globalize script.
 *
 */
PKLOC.setGlobalizationLocale = function(theLocale)
{
  Globalize.culture(theLocale);
}
/**
 *
 * Add a translation to the existing translation matrix
 *
 * @param locale: the locale for which to add the translation
 * @param key:    the key for the translation (generally the word or phrase)
 * @param value:  the translated value.
 *
 */
PKLOC.addTranslation = function(locale, key, value)
{
  if (PKLOC.localizedText[locale])
  {
    PKLOC.localizedText[locale][key] = value;
  } else
  {
    PKLOC.localizedText[locale] =
    {
    };
    PKLOC.localizedText[locale][key] = value;
  }
}
/**
 *
 * Return the user&#x27;s locale (e.g., en-US or fr-FR)
 * for proper localization.
 *
 * @returns the user&#x27;s current locale. If one can&#x27;t be
 * found, &quot;en-US&quot; is returned.
 */
PKLOC.getUserLocale = function()
{
  if (PKLOC.currentUserLocale)
  {
    return PKLOC.currentUserLocale;
  }
  var currentPlatform = &quot;unknown&quot;;
  if ( typeof device != &#x27;undefined&#x27;)
  {
    currentPlatform = device.platform;
  }
  var userLocale = &quot;en-US&quot;;
  // a suitable default

  if (currentPlatform == &quot;Android&quot;)
  {
    // parse the navigator.userAgent
    var userAgent = navigator.userAgent;
    // inspired by http://stackoverflow.com/a/7728507/741043
    var tempLocale = userAgent.match(/Android.*([a-zA-Z]{2}-[a-zA-Z]{2})/);
    if (tempLocale)
    {
      userLocale = tempLocale[1];
    }
  } else
  {
    userLocale = navigator.language || navigator.browserLanguage || navigator.systemLanguage || navigator.userLanguage;
    userLocale = userLocale;
  }

  PKLOC.currentUserLocale = userLocale;
  return PKLOC.currentUserLocale;
}

PKLOC.substituteVariables = function(theString, theParms)
{
  var currentValue = theString;

  // handle replacement variables
  if (theParms)
  {
    for (var i = 1; i &lt;= theParms.length; i++)
    {
      currentValue = currentValue.replace(&quot;%&quot; + i, theParms[i - 1]);
    }
  }

  return currentValue;
}

PKLOC.lookupTranslation = function(key, theLocale)
{
  var userLocale = theLocale || PKLOC.getUserLocale();

  // look it up by checking if userLocale exists, and then if the key (uppercased) exists
  if (PKLOC.localizedText[userLocale])
  {
    if (PKLOC.localizedText[userLocale][key.toUpperCase()])
    {
      return PKLOC.localizedText[userLocale][key.toUpperCase()];
    }
  }

  // if not found, we don&#x27;t return anything but null
  return null;
}
/**
 *
 * Convenience function for translating text.
 *
 * @param key:        the text to translate. Case doesn&#x27;t matter.
 * @param locale:     the locale to use for translation. If not defined, defaults
 *                    to the user&#x27;s current locale.
 * @param parms:      (optional) An indexed array of replacement values.
 *
 * @returns the translated text, or the original key if no translation was found.
 */
function __T(key, parms, locale)
{
  var userLocale = locale || PKLOC.getUserLocale();
  var currentValue = &quot;&quot;;

  if (!( currentValue = PKLOC.lookupTranslation(key, userLocale)))
  {
    // we haven&#x27;t found it under the given locale (of form: xx-XX), try the fallback locale (xx)
    userLocale = userLocale.substr(0, 2);
    if (!( currentValue = PKLOC.lookupTranslation(key, userLocale)))
    {
      // we haven&#x27;t found it under any of the given locales; try en-US
      userLocale = &quot;en-US&quot;;
      if (!( currentValue = PKLOC.lookupTranslation(key, userLocale)))
      {
        // we haven&#x27;t found it under any of the given locales; try en
        userLocale = &quot;en&quot;;
        if (!( currentValue = PKLOC.lookupTranslation(key, userLocale)))
        {
          // we didn&#x27;t find it at all... we&#x27;ll use the key
          currentValue = key;
        }
      }
    }
  }

  return PKLOC.substituteVariables(currentValue, parms);
}

/**
 *
 * Convenience function for localizing numbers.
 *
 * @param theNumber:       the number to localize
 * @param theFormat:       the number of decimal places to use. Defaults to &quot;n&quot; if not supplied
 * @param theLocale:       (optional) the locale. If not specified, current locale is assumed.
 *
 * @returns the number formatted according to the locale. If the number of digits after
 * the decimal point is less than the actual number of digits, rounding is performed. If
 * the number of digits is more than the actual number of digits, zeroes are added.
 *
 */

function __N(theNumber, theFormat, theLocale)
{
  var iFormat = &quot;n&quot; + theFormat;
  var iLocale = theLocale || PKLOC.getUserLocale();

  PKLOC.setGlobalizationLocale(iLocale);

  return Globalize.format(theNumber, iFormat);
}

/**
 *
 * Convenience function for localizing currency.
 *
 * @param theNumber:       the number to localize
 * @param theFormat:       the number of decimal places, defaults to two if not specified
 * @param theLocale:       (optional) the locale. If not specified, current locale is assumed.
 *
 * @returns the number formatted according to the locale&#x27;s currency. If the number of digits after
 * the decimal point is less than the actual number of digits, rounding is performed. If
 * the number of digits is more than the actual number of digits, zeroes are added.
 *
 */
function __C(theNumber, theFormat, theLocale)
{
  var iFormat = &quot;c&quot; + theFormat;
  var iLocale = theLocale || PKLOC.getUserLocale();

  PKLOC.setGlobalizationLocale(iLocale);

  return Globalize.format(theNumber, iFormat);
}

/**
 *
 * Convenience function for localizing percentages.
 *
 * @param theNumber:       the number to localize
 * @param theFormat:       the number of decimal places, defaults to two if not specified
 * @param theLocale:       (optional) the locale. If not specified, current locale is assumed.
 *
 * @returns the number formatted according to the locale&#x27;s percent settings.
 *
 */
function __PCT(theNumber, theFormat, theLocale)
{
  var iFormat = &quot;p&quot; + theFormat;
  var iLocale = theLocale || PKLOC.getUserLocale();

  PKLOC.setGlobalizationLocale(iLocale);

  return Globalize.format(theNumber, iFormat);
}

/**
 *
 * Convenience function for localizing dates.
 *
 * @param theDate:         the date to localize
 * @param theFormat:       (optional) The format of the date; &quot;d&quot; is assumed if not provided.
 * @param theLocale:       (optional) the locale. If not specified, current locale is assumed.
 *
 * @returns the date formatted according to the locale&#x27;s settings.
 *
 */
function __D(theDate, theFormat, theLocale)
{
  var iFormat = theFormat || &quot;d&quot;;
  var iLocale = theLocale || PKLOC.getUserLocale();

  PKLOC.setGlobalizationLocale(iLocale);

  return Globalize.format(theDate, iFormat);
}


    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
